<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIKUSEA LA MULTI ANI</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
     
      html,
      body {
        height: 100%;
        touch-action: none;
      }

      body {
        overflow: hidden;
        display: flex;
        background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
        font-family: "Anton", sans-serif;
        justify-content: center;
        align-items: center;
        position: relative; /* Added for positioning */
      }

      .night {
        position: absolute; /* Changed to absolute */
        width: 100%;
        height: 100%;
        z-index: 1; /* Ensure it's behind the images */
        transform: rotateZ(45deg);
      }

      .shooting_star {
        position: absolute;
        left: 50%;
        top: 50%;
        height: 2px;
        background: linear-gradient(-45deg, #5f91ff, rgba(0, 0, 255, 0));
        border-radius: 999px;
        filter: drop-shadow(0 0 6px #699bff);
        animation: tail 3000ms ease-in-out infinite, shooting 3000ms ease-in-out infinite;
      }

      .shooting_star::before,
      .shooting_star::after {
        content: "";
        position: absolute;
        top: calc(50% - 1px);
        right: 0;
        height: 2px;
        background: linear-gradient(-45deg, rgba(0, 0, 255, 0), #5f91ff, rgba(0, 0, 255, 0));
        border-radius: 100%;
        animation: shining 3000ms ease-in-out infinite;
      }

      .shooting_star::before {
        transform: translateX(50%) rotateZ(45deg);
      }

      .shooting_star::after {
        transform: translateX(50%) rotateZ(-45deg);
      }

      /* Shooting star positions */
      .shooting_star:nth-child(1) { top: calc(50% - -149px); left: calc(50% - 286px); animation-delay: 9871ms; }
      .shooting_star:nth-child(2) { top: calc(50% - 197px); left: calc(50% - 33px); animation-delay: 9633ms; }
      .shooting_star:nth-child(3) { top: calc(50% - -126px); left: calc(50% - 44px); animation-delay: 1100ms; }
      .shooting_star:nth-child(4) { top: calc(50% - 120px); left: calc(50% - 206px); animation-delay: 491ms; }
      .shooting_star:nth-child(5) { top: calc(50% - -51px); left: calc(50% - 139px); animation-delay: 3383ms; }
      .shooting_star:nth-child(6) { top: calc(50% - -163px); left: calc(50% - 105px); animation-delay: 4467ms; }
      .shooting_star:nth-child(7) { top: calc(50% - 90px); left: calc(50% - 284px); animation-delay: 5832ms; }
      .shooting_star:nth-child(8) { top: calc(50% - -102px); left: calc(50% - 295px); animation-delay: 9046ms; }
      .shooting_star:nth-child(9) { top: calc(50% - 184px); left: calc(50% - 121px); animation-delay: 513ms; }
      .shooting_star:nth-child(10) { top: calc(50% - 133px); left: calc(50% - 26px); animation-delay: 7534ms; }
      .shooting_star:nth-child(11) { top: calc(50% - -74px); left: calc(50% - 242px); animation-delay: 5191ms; }
      .shooting_star:nth-child(12) { top: calc(50% - -44px); left: calc(50% - 35px); animation-delay: 3530ms; }
      .shooting_star:nth-child(13) { top: calc(50% - 173px); left: calc(50% - 59px); animation-delay: 4041ms; }
      .shooting_star:nth-child(14) { top: calc(50% - -118px); left: calc(50% - 245px); animation-delay: 7443ms; }
      .shooting_star:nth-child(15) { top: calc(50% - 168px); left: calc(50% - 22px); animation-delay: 159ms; }
      .shooting_star:nth-child(16) { top: calc(50% - 61px); left: calc(50% - 170px); animation-delay: 9359ms; }
      .shooting_star:nth-child(17) { top: calc(50% - -55px); left: calc(50% - 58px); animation-delay: 7741ms; }
      .shooting_star:nth-child(18) { top: calc(50% - -19px); left: calc(50% - 201px); animation-delay: 7834ms; }
      .shooting_star:nth-child(19) { top: calc(50% - -124px); left: calc(50% - 115px); animation-delay: 8908ms; }
      .shooting_star:nth-child(20) { top: calc(50% - -106px); left: calc(50% - 171px); animation-delay: 3898ms; }

      @keyframes tail {
        0% { width: 0; }
        30% { width: 100px; }
        100% { width: 0; }
      }

      @keyframes shining {
        0% { width: 0; }
        50% { width: 30px; }
        100% { width: 0; }
      }

      @keyframes shooting {
        0% { transform: translateX(0); }
        100% { transform: translateX(300px); }
      }

      #drag-container,
      #spin-container {
        position: relative;
        display: flex;
        margin: auto;
        transform-style: preserve-3d;
        transform: rotateX(-10deg);
        z-index: 2; /* Ensure it's above the night background */
      }

      #drag-container img,
      #drag-container video {
        transform-style: preserve-3d;
        position: absolute;
        left: 0;
        top: 0;
        width: 120%;
        height: 100%;
        line-height: 200px;
        font-size: 50px;
        text-align: center;
        box-shadow: 0 0 8px #fff;
        box-reflect: below 10px linear-gradient(transparent, transparent, #0005);
      }

      #drag-container video {
        object-fit: fill;
        width: 130%;
        height: 105%;
      }

      #drag-container img:hover,
      #drag-container video:hover {
        box-shadow: 0 0 15px #fffd;
        box-reflect: below 10px linear-gradient(transparent, transparent, #0007);
      }

      #drag-container p {
        font-family: Serif;
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translate(-50%, -50%) rotateX(90deg);
        color: #fff;
      }

      #ground {
        width: 900px;
        height: 900px;
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translate(-50%, -50%) rotateX(90deg);
        background: radial-gradient(center center, farthest-side, #9993, transparent);
      }

      #music-container {
        position: absolute;
        top: 0;
        left: 0;
      }

      @keyframes spin {
        from { transform: rotateY(0deg); }
        to { transform: rotateY(360deg); }
      }

      @keyframes spinRevert {
        from { transform: rotateY(360deg); }
        to { transform: rotateY(0deg); }
      }
    </style>
</head>
<body>
    <div class="night">
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
    </div>
    <div id="drag-container">
      <div id="spin-container">
        <img src="poza1.jpg" alt="Ceva" />
        <img src="poza2.jpg" alt="Ceva" />
        <img src="poza3.jpg" alt="Ceva" />
        <img src="poza4.jpg" alt="Ceva" />
        <img src="poza5.jpg" alt="Ceva" />
        <img src="poza6.jpg" alt="Ceva" />
        <img src="poza7.jpg" alt="Ceva" />
        <video controls autoplay loop>
          <source src="friend.mp4" type="video/mp4" />
        </video>
        <p><font color="hotpink">La Mul»õi Ani COLEGA DE BANCA!!</font></p>
      </div>
      <div id="ground"></div>
    </div>
    <div id="music-container"></div>
    <button id="chimieBtn" style="
        position: fixed;
        bottom: 32px;
        right: 32px;
        padding: 14px 20px;
        background: #a259e6;
        color: #fff;
        border: none;
        border-radius: 30px;
        font-size: 1.5rem;
        font-family: inherit;
        cursor: pointer;
        box-shadow: 0 4px 16px rgba(162,89,230,0.2);
        z-index: 9999;
        transition: background 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
    "
    onclick="window.location.href='copac.html?startmusic=true'">
        &#8594;
    </button>
    <script>
        var radius = 240;
        var autoRotate = true;
        var rotateSpeed = -60;
        var imgWidth = 120;
        var imgHeight = 170;
        var bgMusicURL = "dancing-queen.mp3.mp3"; // URL of background music
        var bgMusicControls = true; 
        setTimeout(init, 1000);
        var odrag = document.getElementById("drag-container");
        var ospin = document.getElementById("spin-container");
        var aImg = ospin.getElementsByTagName("img");
        var aVid = ospin.getElementsByTagName("video");
        var aEle = [...aImg, ...aVid];
        ospin.style.width = imgWidth + "px";
        ospin.style.height = imgHeight + "px";
        var ground = document.getElementById("ground");
        ground.style.width = radius * 3 + "px";
        ground.style.height = radius * 3 + "px";

        function init(delayTime) {
          for (var i = 0; i < aEle.length; i++) {
            aEle[i].style.transform = "rotateY(" + i * (360 / aEle.length) + "deg) translateZ(" + radius + "px)";
            aEle[i].style.transition = "transform 1s";
            aEle[i].style.transitionDelay = delayTime || (aEle.length - i) / 4 + "s";
          }
        }

        function applyTranform(obj) {
          if (tY > 180) tY = 180;
          if (tY < 0) tY = 0;
          obj.style.transform = "rotateX(" + -tY + "deg) rotateY(" + tX + "deg)";
        }

        function playSpin(yes) {
          ospin.style.animationPlayState = yes ? "running" : "paused";
        }

        var sX, sY, nX, nY, desX = 0, desY = 0, tX = 0, tY = 10;

        // auto spin
        if (autoRotate) {
          var animationName = rotateSpeed > 0 ? "spin" : "spinRevert";
          ospin.style.animation = `${animationName} ${Math.abs(rotateSpeed)}s infinite linear`;
        }

        // add background music 
        
        if (bgMusicURL) {
          document.getElementById("music-container").innerHTML += `
  <audio id="bg-music" src="${bgMusicURL}" ${bgMusicControls ? "controls" : ""} autoplay loop>
    <p>If you are reading this, it is because your browser does not support the audio element.</p>
  </audio>
`;

setTimeout(() => {
  const music = document.getElementById("bg-music");
  music.currentTime = 79; // skip to 1:19
}, 500); // slight delay to ensure audio loads

        } 

        // setup events
        document.onpointerdown = function (e) {
          clearInterval(odrag.timer);
          e = e || window.event;
          var sX = e.clientX, sY = e.clientY;
          this.onpointermove = function (e) {
            e = e || window.event;
            var nX = e.clientX, nY = e.clientY;
            desX = nX - sX;
            desY = nY - sY;
            tX += desX * 0.1;
            tY += desY * 0.1;
            applyTranform(odrag);
            sX = nX;
            sY = nY;
          };
          this.onpointerup = function (e) {
            odrag.timer = setInterval(function () {
              desX *= 0.95;
              desY *= 0.95;
              tX += desX * 0.1;
              tY += desY * 0.1;
              applyTranform(odrag);
              playSpin(false);
              if (Math.abs(desX) < 0.5 && Math.abs(desY) < 0.5) {
                clearInterval(odrag.timer);
                playSpin(true);
              }
            }, 17);
            this.onpointermove = this.onpointerup = null;
          };
          return false;
        };

        document.onmousewheel = function (e) {
          e = e || window.event;
          var d = e.wheelDelta / 20 || -e.detail;
          radius += d;
          init(1);
        };
    </script>
</body>
</html>
